<!DOCTYPE html>
<html>
        <head>
            <title>Escape Room - A-Frame</title>
            <meta name ="description" content="IDK WHAT GOES HERE YET">
            
            <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
            <script src="Js/securitycam.js"></script>
            <script src="Js/numberkey.js"></script>
            <script src="Js/padlock.js"></script>
            <script src="Js/spectator.js"></script>
            <script src="Js/enterkey.js"></script>
            <script src="Js/deletekey.js"></script>
            <script src="Js/userplayer.js"></script>
            <script src="Js/scenecontroller.js"></script>
            <script src="Js/overlay.js"></script>
            <script src="Js/mobile-controls.js"></script>
            <!--Links Physics System by Don McCurdy and 17 other contributors...It is free to use commercially under the MIT License -->
            <script src="https://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v3.3.0/dist/aframe-physics-system.min.js"></script>
            <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
            <script src="https://unpkg.com/super-hands@^3.0.1/dist/super-hands.min.js"></script>
            <!--Links Ammo physics driver part of the afformentioned system, based on bullet (bulletphysics.org) which is also free to use for any purpose-->
            <script src="/socket.io/socket.io.js"></script>

            <style>
                .a-loader-title{
                    color: red;
                 }

                .mobileHudButton{
                    border: none;
                    position: relative;
                    margin-left: 5%;
                    margin-right: 5%;
                    height: inherit;
                    width: 100px;
                    background-color: deepskyblue;
                    border-radius: 50%;
                    font-size: 30px;
                }
                .mobileHud{
                    height: 100px;
                    width: 300px;
                    position: fixed;
                    bottom: 5%;
                    align-items: center;
                }
            </style>
        </head>
        
        <body>
            <script>
                //require('aframe');
               
                              //const superhands = require('super-hands');
                let socket = io();
                var otherPlayers = [];
                class Player {
                    pos = {
                        x: 0,
                        y: 0,
                        z: 0 
                    };
      
                    rot = {
                        x: 0,
                        y: 0,
                        z: 0
                    };

                    constructor(id, pos, rot){
                        this.id = id;
                        this.pos = pos;
                        this.rot = rot;
                    };
                }
                function createPlayer(id){
                    
                    if(id != null){
                        if(id != socket.id){
                            let tempArray = Array.from(document.querySelectorAll('[otherplayer]'));
                            if(tempArray.some(e => e.getAttribute('otherplayer') == id)==false){

                                let newPlayer = document.createElement("a-entity");
                                newPlayer.setAttribute('otherplayer', id)
                                const manager = document.querySelector('#player_master');
                                manager.appendChild(newPlayer);
                                let newBody = document.createElement("a-cylinder");
                                newBody.setAttribute('height', 2);
                                newBody.setAttribute('radius', 0.3);
                                newBody.setAttribute('color', 'green');
                                newBody.setAttribute('position', '0 1 0');
                                newPlayer.appendChild(newBody);
                                if(otherPlayers.some(e => e.getAttribute('otherplayer') == id)==false){
                                    otherPlayers.push(newPlayer);
                                }
                                console.log('newplayer created');
                            }
                        }
                    }
                    
                }
                
                
                socket.on('connect', (data)=>{
                    //document.querySelector().addEventListener('', function(){
                    //  socket.emit('');
                    //})
                    if(otherPlayers.some(e => e.getAttribute('otherplayer') == id)){
                                console.log('delete player called');
                                let temp = otherPlayers.find(e => e.getAttribute('otherplayer') == id);
                                let indx = otherPlayers.findIndex(temp);
                                otherPlayers.splice(indx, 1);
                                let master = document.querySelector('#player_master');
                                master.removeChild(temp);
                                }
                    console.log('connected');
                    console.log(socket);
                    let plyrEl = document.querySelector('#playercam');
                    let pos = plyrEl.getAttribute('position');
                    let rot = plyrEl.getAttribute('rotation');
                    socket.emit('Set_Player', socket.id, pos, rot);
                    let doors = document.querySelectorAll('.Pad').forEach(element=>{
                        element.addEventListener('ent', function(){
                        console.log(element);
                        element.components.padlock.checkPassword(socket);
                        });
                    });
                });

                socket.on('disconnect', (data)=>{

                    let master = document.querySelector('#player_master');
                    Array.from(document.querySelectorAll('[otherplayer]')).forEach(element => {
                        let indx = otherPlayers.findIndex(element);
                        otherPlayers.splice(indx,1);
                        master.removeChild(element); 
                    });                    
                });
                socket.on('Sync_Closet',(isOpen, id)=>{
                    console.log('Recieved Sync_Closet');
                    let pad = document.querySelector('#Closet_Lock').components.padlock;
                    if(pad.data.isOpen!=isOpen){
                        pad.syncDoor();
                    }
                });
                socket.on('Sync_Exit',(isOpen)=>{
                    console.log('Recieved Sync_Exit');
                    let pad = document.querySelector('#Exit_Lock').components.padlock;
                    if(pad.data.isOpen!=isOpen){
                        pad.syncDoor();
                    }
                });
                socket.on('Create_Player',(id)=>{
                    //if(otherPlayers.find(e => e.getAttribute('otherplayer') == id)==undefined){
                    //    createPlayer(id);
                    //}
                    if(otherPlayers.some(e => e.getAttribute('otherplayer') == id)==false){
                        createPlayer(id);
                    } 
                });

                socket.on('Delete_Player',(id)=>{
                    //player object with id needs to be deleted
                    console.log('delete player called');
                    let temp = otherPlayers.find(e => e.getAttribute('otherplayer') == id);
                    if(temp!=undefined && temp != null){
                        let indx = otherPlayers.findIndex(e=> e = temp);
                    otherPlayers.splice(indx, 1);
                    let master = document.querySelector('#player_master');
                    master.removeChild(temp);
                    }
                });
                socket.on('Player_Update',(id, pos, rot)=>{  
                    //console.log('playerupdate started');
        
                    if(otherPlayers.some(e => e.getAttribute('otherplayer') == id)==false){
                        createPlayer(id);
                    }

                   let pEl = otherPlayers.find(e => e.getAttribute('otherplayer') == id);
                    if(pEl!= undefined){
                        
                    // otherPlayers[indx].setAttribute('position', pos);
                    // otherPlayers[indx].setAttribute('rotation', rot);
                        pEl.setAttribute('position', pos);
                        pEl.setAttribute('rotation', rot);
                    }   
                   
                    //console.log(otherPlayers);
                });
                            
                uptick = setInterval(function(){
                    let plyrEl = document.querySelector('#playercam');
                    let pos = plyrEl.getAttribute('position');
                    let rot = plyrEl.getAttribute('rotation');
                    socket.emit('up', socket.id, pos, rot);
                }, 33)
                
                
            </script>
            
            <a-scene scenecontroller physics="debug: false; gravity: 0" loading-screen="dotsColor: red; backgroundColor: black">
                <a-assets timeout="50000">
                    <a-asset-item id="room_model"   response-type="arraybuffer" src="/assets/Room.glb"  ></a-asset-item>
                    <a-asset-item id="monitor_model" response-type="arraybuffer" src="/assets/Monitor.glb"></a-asset-item>
                    <a-asset-item id="desk_model" response-type="arraybuffer" src="/assets/Desk.glb"></a-asset-item>
                    <a-asset-item id="wall_with_door_model" response-type="arraybuffer" src="/assets/Wall_with_door.glb"></a-asset-item>
                    <a-asset-item id="tv_model" response-type="arraybuffer" src="/assets/Tv.glb"></a-asset-item>
                    <a-asset-item id="long_wall_model" response-type="arraybuffer" src="/assets/Long_Wall.glb"></a-asset-item>
                    <a-asset-item id="shelves_model" response-type="arraybuffer" src="/assets/Shelves.glb"></a-asset-item>
                    <a-asset-item id="shelves_withHints_model" response-type="arraybuffer" src="/assets/bookshelvesWithHint.glb"></a-asset-item>

                    <a-asset-item id="bed_model" response-type="arraybuffer" src="/assets/Bed.glb"></a-asset-item>
                    <a-asset-item id="floor_model" response-type="arraybuffer" src="/assets/Floor.glb"></a-asset-item>
                    <a-asset-item id="door_model" response-type="arraybuffer" src="/assets/Door.glb"></a-asset-item>
                    <a-asset-item id="far_wall_model" response-type="arraybuffer" src="/assets/Far_Wall.glb"></a-asset-item>
                    <a-asset-item id="pinboard_model" response-type="arraybuffer" src="/assets/Pinboard.glb"></a-asset-itme>
                    <a-asset-item id="exit_sign_model" response-type="arraybuffer" src="/assets/Exit_Sign.glb"></a-asset-item>
                    <a-asset-item id="padlock_model" response-type="arraybuffer" src="/assets/Padlock.glb"></a-asset-item>
                    <a-asset-item id="light_fixture_model" response-type="arraybuffer" src="/assets/Light_Fixture.glb"></a-asset-item>
                    <a-asset-item id="main_ceiling_model" response-type="arraybuffer" src="/assets/Main_Ceiling.glb"></a-asset-item>
                    <a-asset-item id="small_ceiling_model" response-type="arraybuffer" src="/assets/Small_Ceiling.glb"></a-asset-item>
                    <a-asset-item id="book_model" response-type="arraybuffer" src="/assets/Book.glb"></a-asset-item>
                    <a-asset-item id="far_floor_model" response-type="arraybuffer" src="/assets/Far_Floor.glb"></a-asset-item>
                    <a-asset-item id="delete_button_model" response-type="arraybuffer" src="/assets/Delete_Button.glb"></a-asset-item>
                    <a-asset-item id="enter_button_model" response-type="arraybuffer" src="/assets/Enter_Button.glb"></a-asset-item>
                    <a-asset-item id="key_pad_button_model" response-type="arraybuffer" src="/assets/Key_Pad_Button.glb"></a-asset-item>
                </a-assets>

               
                <a-entity id="playercam" kinematic-body="radius: 0.3" movement-controls  position="0 0 1" userplayer>
                    <a-entity id="camera" camera position="0 1.6 0" look-controls></a-entity> 
                </a-entity>
               
                    <a-entity cursor="rayOrigin:mouse;" raycaster="far:10; interval:200; objects:.interactive"></a-entity>
                <a-entity id="monitor_model" position="0 0.9 -0.15" rotation="0 0 0" scale="0.33 0.33 0.33" gltf-model="#monitor_model"></a-entity>
                <a-entity id="player_master" position>
                </a-entity>
                <!--Everything in the inaccessible room should be a child of Far_Room_entity.-->

                <a-entity id="Escape" geometry="primitive: plane" material="color: blue" position="-10 0 0" sound="src: /music/Escape.wav; autoplay: true; loop: true"></a-entity>

                <a-entity id="Far_Room_Entity" position="10 0 0"> 
                    
                    <a-entity id="Security_Camera" camera position="0 1.6 -1" rotation="0 0 0" spectator="canvas:#securitycamDiv;" active="false"></a-entity>
                    <!--<a-entity   id="Light_Fixture" position="0 2.2 0" rotation="0 0 0" gltf-model="#light_fixture_model" shadow></a-entity>-->
                    <a-entity position="0 2.2 0" light="type:point; intensity:1; angle:40; penumbra:0.3; castShadow:false; shadowBias:-0.0007"></a-entity>
                    
                    <!--Doors are done by being parented to a hinge. This allows for them to simply do a local rotation to open.-->
                    <a-entity id="Far_Door_Hinge" position="-2.55 0 -1.12" rotation="0 0 0" scale="1 1 1" animation__open="property:rotation.y; to:90; dur:200; startEvents:open;">
                            <a-entity id="Far_Door" position="0 0 -0.38" rotation="0 0 0" scale="1 1 1" gltf-model="#door_model" shadow></a-entity>
                    </a-entity>
                    
                    <a-entity   id="Far_Exit_Sign" position="-2.49 2.21 -1.5" gltf-model="#exit_sign_model" shadow></a-entity>

                    <!--The walls of the room are all parented under a larger object for organizational purposes.-->
                    <a-entity id="Far_Walls">
                        <a-entity id="Far_Room_North_Wall" position="0 0 -2.65" rotation="0 0 0" scale="1 1 1" gltf-model="#far_wall_model" shadow static-body="offset: 0 1.372 0"></a-entity>
                        <a-entity id="Far_Room_South_Wall" position="0 0 2.65" rotation="0 0 0" scale="1 1 1" gltf-model="#far_wall_model" shadow static-body="offset: 0 1.372 0"></a-entity>
                        <a-entity id="Far_Room_East_Wall" position="2.55 0 0" rotation="0 90 0" scale="1 1 1" gltf-model="#far_wall_model" shadow 
                        body="type: static; shape: none;"
                        shape="offset: 0 1.372 0; orientation: 0.707 0 0.707 0; halfExtents: 0.05 1.372 2.6">
                        </a-entity>
                        <a-entity id="Far_Room_West_Wall" position="-2.55 0 0" rotation="0 90 0" scale="1 1 1" gltf-model="#wall_with_door_model" shadow 
                        body="type: static; shape: none;"
                        shape="offset: 0 1.372 0; orientation: 0.707 0 0.707 0; halfExtents: 0.05 1.372 2.6">
                        </a-entity>
                    </a-entity>
                  
                    <a-entity id="Far_Floor" position="0 0 0" rotation="0 0 0" scale="1 1 1" gltf-model="#far_floor_model" static-body></a-entity>
                    <a-entity   id="Far_Desk" position="0 0 -2.29" rotation="0 0 0" scale="1 1 1" gltf-model="#desk_model" static-body shadow>
                        <a-entity   id="far_monitor_model" position="0 0.9 -0.15" rotation="0 0 0" scale="0.33 0.33 0.33"
                            gltf-model="#monitor_model" static-body></a-entity>
                    </a-entity>
                </a-entity>

                <!--Everything in the starting room should be a child of Main_Room_Entity.-->
                <a-entity   id="Main_Room_Entity">
                    <a-entity   id="Exit_Sign" position="-2.9185 2.21 -1.5" gltf-model="#exit_sign_model" shadow></a-entity>
                    <a-entity   id="Desk" position="0 0 0" rotation="0 0 0" scale="1 1 1" gltf-model="#desk_model" shadow></a-entity>
                    <a-entity   id="Exit_Lock" class="Pad" position="-2.94 1.2 -0.9" rotation="0 0 0" gltf-model="#padlock_model" shadow padlock="door:#Exit_Door_Hinge; password: 1111; lcd:#Exit_Lock_LCD; padID:Exit_Lock;">
                        <a-entity id="Exit_Lock_LCD" text="value:----; color:white; width:1; align:center;" position="0.01 0.18 0" rotation="0 90 0"></a-entity>
                        <a-entity id="Exit_Lock_Enter_Button" class="interactive" position="0.01 0.02 0.03" rotation="0 0 0" gltf-model="#enter_button_model" animation__press="property:position; from:0 0.02 0.03; to:0.01 0.02 0.03; dur:100; startEvents:click" enterkey="parentpadlock:#Exit_Lock" shadow>
                            <a-entity text="value:Ent; color:black; width:0.25; align:center;" position="0.01 0.01 0" rotation="0 90 0"></a-entity>
                        </a-entity>
                        <a-entity id="Exit_Lock_Delete_Button" class="interactive" position="0.01 0.02 -0.03" rotation="0 0 0" gltf-model="#delete_button_model" animation__press="property:position; from:0 0.02 -0.03; to:0.01 0.02 -0.03; dur:100; startEvents:click" deletekey="parentpadlock:#Exit_Lock" shadow>
                            <a-entity text="value:Del; color:black; width:0.25; align:center;" position="0.01 0.01 0" rotation="0 90 0"></a-entity>
                        </a-entity>
                        <a-entity id="Exit_Lock_Zero_Button" class="interactive" position="0.01 0.02 0" rotation="0 0 0" gltf-model="#key_pad_button_model" animation__press="property:position; from:0 0.02 0; to:0.01 0.02 0; dur:100; startEvents:click" shadow numberkey="value:0; parentpadlock: #Exit_Lock;">
                            <a-entity text="value:0; width:0.25; align:center;" position="0.01 0.01 0" rotation="0 90 0"></a-entity>
                        </a-entity>
                        <a-entity id="Exit_Lock_One_Button" class="interactive" position="0.01 0.11 0.03" rotation="0 0 0" gltf-model="#key_pad_button_model" animation__press="property:position; from:0 0.11 0.03; to:0.01 0.11 0.03; dur:100; startEvents:click" shadow numberkey="value:1; parentpadlock: #Exit_Lock;">
                            <a-entity text="value:1; width:0.25; align:center;" position="0.01 0.01 0" rotation="0 90 0"></a-entity>
                        </a-entity>
                        <a-entity id="Exit_Lock_Two_Button" class="interactive" position="0.01 0.11 0" rotation="0 0 0" gltf-model="#key_pad_button_model" animation__press="property:position; from:0 0.11 0; to:0.01 0.11 0; dur:100; startEvents:click" shadow numberkey="value:2; parentpadlock: #Exit_Lock;">
                            <a-entity text="value:2; width:0.25; align:center;" position="0.01 0.01 0" rotation="0 90 0"></a-entity>
                        </a-entity>
                        <a-entity id="Exit_Lock_Three_Button" class="interactive" position="0.01 0.11 -0.03" rotation="0 0 0" gltf-model="#key_pad_button_model" animation__press="property:position; from:0 0.11 -0.03; to:0.01 0.11 -0.03; dur:100; startEvents:click" shadow numberkey="value:3; parentpadlock: #Exit_Lock;">
                            <a-entity text="value:3; width:0.25; align:center;" position="0.01 0.01 0" rotation="0 90 0"></a-entity>
                        </a-entity>
                        <a-entity id="Exit_Lock_Four_Button" class="interactive" position="0.01 0.08 0.03" rotation="0 0 0" gltf-model="#key_pad_button_model" animation__press="property:position; from:0 0.08 0.03; to:0.01 0.08 0.03; dur:100; startEvents:click" shadow numberkey="value:4; parentpadlock: #Exit_Lock;">
                            <a-entity text="value:4; width:0.25; align:center;" position="0.01 0.01 0" rotation="0 90 0"></a-entity>
                        </a-entity>
                        <a-entity id="Exit_Lock_Five_Button" class="interactive" position="0.01 0.08 0" rotation="0 0 0" gltf-model="#key_pad_button_model" animation__press="property:position; from:0 0.08 0; to:0.01 0.08 0; dur:100; startEvents:click" shadow numberkey="value:5; parentpadlock: #Exit_Lock;">
                            <a-entity text="value:5; width:0.25; align:center;" position="0.01 0.01 0" rotation="0 90 0"></a-entity>
                        </a-entity>
                        <a-entity id="Exit_Lock_Six_Button" class="interactive" position="0.01 0.08 -0.03" rotation="0 0 0" gltf-model="#key_pad_button_model" animation__press="property:position; from:0 0.08 -0.03; to:0.01 0.08 -0.03; dur:100; startEvents:click" shadow numberkey="value:6; parentpadlock: #Exit_Lock;">
                            <a-entity text="value:6; width:0.25; align:center;" position="0.01 0.01 0" rotation="0 90 0"></a-entity>
                        </a-entity>
                        <a-entity id="Exit_Lock_Seven_Button" class="interactive" position="0.01 0.05 0.03" rotation="0 0 0" gltf-model="#key_pad_button_model" animation__press="property:position; from:0 0.05 0.03; to:0.01 0.05 0.03; dur:100; startEvents:click" shadow numberkey="value:7; parentpadlock: #Exit_Lock;">
                            <a-entity text="value:7; width:0.25; align:center;" position="0.01 0.01 0" rotation="0 90 0"></a-entity>
                        </a-entity>
                        <a-entity id="Exit_Lock_Eight_Button" class="interactive" position="0.01 0.05 0" rotation="0 0 0" gltf-model="#key_pad_button_model" animation__press="property:position; from:0 0.05 0; to:0.01 0.05 0; dur:100; startEvents:click" shadow numberkey="value:8; parentpadlock: #Exit_Lock;">
                            <a-entity text="value:8; width:0.25; align:center;" position="0.01 0.01 0" rotation="0 90 0"></a-entity>
                        </a-entity>
                        <a-entity id="Exit_Lock_Nine_Button" class="interactive" position="0.01 0.05 -0.03" rotation="0 0 0" gltf-model="#key_pad_button_model" animation__press="property:position; from:0 0.05 -0.03; to:0.01 0.05 -0.03; dur:100; startEvents:click" shadow numberkey="value:9; parentpadlock: #Exit_Lock;">
                            <a-entity text="value:9; width:0.25; align:center;" position="0.01 0.01 0" rotation="0 90 0"></a-entity>
                        </a-entity>
                    </a-entity>

                    <a-entity   id="Closet_Lock" class="Pad" position="2.94 1.2 0.9" rotation="0 180 0" gltf-model="#padlock_model" shadow padlock="door:#Middle_Door_Hinge; lcd:#Closet_Lock_LCD; password: 3211; padID:Closet_Lock;" static-body>
                        <a-entity id="Closet_Lock_LCD" text="value:----; color:white; width:1; align:center;" position="0.01 0.18 0" rotation="0 90 0"></a-entity>
                        <a-entity id="Closet_Lock_Enter_Button" class="interactive" position="0.01 0.02 0.03" rotation="0 0 0" gltf-model="#enter_button_model" animation__press="property:position; from:0 0.02 0.03; to:0.01 0.02 0.03; dur:100; startEvents:click" enterkey="parentpadlock:#Closet_Lock" shadow>
                            <a-entity text="value:Ent; color:black; width:0.25; align:center;" position="0.01 0.01 0" rotation="0 90 0"></a-entity>
                        </a-entity>
                        <a-entity id="Closet_Lock_Delete_Button" class="interactive" position="0.01 0.02 -0.03" rotation="0 0 0" gltf-model="#delete_button_model" animation__press="property:position; from:0 0.02 -0.03; to:0.01 0.02 -0.03; dur:100; startEvents:click" deletekey="parentpadlock:#Closet_Lock" shadow>
                            <a-entity text="value:Del; color:black; width:0.25; align:center;" position="0.01 0.01 0" rotation="0 90 0"></a-entity>
                        </a-entity>
                        <a-entity id="Closet_Lock_Zero_Button" class="interactive" position="0.01 0.02 0" rotation="0 0 0" gltf-model="#key_pad_button_model" animation__press="property:position; from:0 0.02 0; to:0.01 0.02 0; dur:100; startEvents:click" shadow numberkey="value:0; parentpadlock: #Closet_Lock;">
                            <a-entity text="value:0; width:0.25; align:center;" position="0.01 0.01 0" rotation="0 90 0"></a-entity>
                        </a-entity>
                        <a-entity id="Closet_Lock_One_Button" class="interactive" position="0.01 0.11 0.03" rotation="0 0 0" gltf-model="#key_pad_button_model" animation__press="property:position; from:0 0.11 0.03; to:0.01 0.11 0.03; dur:100; startEvents:click" shadow numberkey="value:1; parentpadlock: #Closet_Lock;">
                            <a-entity text="value:1; width:0.25; align:center;" position="0.01 0.01 0" rotation="0 90 0"></a-entity>
                        </a-entity>
                        <a-entity id="Closet_Lock_Two_Button" class="interactive" position="0.01 0.11 0" rotation="0 0 0" gltf-model="#key_pad_button_model" animation__press="property:position; from:0 0.11 0; to:0.01 0.11 0; dur:100; startEvents:click" shadow numberkey="value:2; parentpadlock: #Closet_Lock;">
                            <a-entity text="value:2; width:0.25; align:center;" position="0.01 0.01 0" rotation="0 90 0"></a-entity>
                        </a-entity>
                        <a-entity id="Closet_Lock_Three_Button" class="interactive" position="0.01 0.11 -0.03" rotation="0 0 0" gltf-model="#key_pad_button_model" animation__press="property:position; from:0 0.11 -0.03; to:0.01 0.11 -0.03; dur:100; startEvents:click" shadow numberkey="value:3; parentpadlock: #Closet_Lock;">
                            <a-entity text="value:3; width:0.25; align:center;" position="0.01 0.01 0" rotation="0 90 0"></a-entity>
                        </a-entity>
                        <a-entity id="Closet_Lock_Four_Button" class="interactive" position="0.01 0.08 0.03" rotation="0 0 0" gltf-model="#key_pad_button_model" animation__press="property:position; from:0 0.08 0.03; to:0.01 0.08 0.03; dur:100; startEvents:click" shadow numberkey="value:4; parentpadlock: #Closet_Lock;">
                            <a-entity text="value:4; width:0.25; align:center;" position="0.01 0.01 0" rotation="0 90 0"></a-entity>
                        </a-entity>
                        <a-entity id="Closet_Lock_Five_Button" class="interactive" position="0.01 0.08 0" rotation="0 0 0" gltf-model="#key_pad_button_model" animation__press="property:position; from:0 0.08 0; to:0.01 0.08 0; dur:100; startEvents:click" shadow numberkey="value:5; parentpadlock: #Closet_Lock;">
                            <a-entity text="value:5; width:0.25; align:center;" position="0.01 0.01 0" rotation="0 90 0"></a-entity>
                        </a-entity>
                        <a-entity id="Closet_Lock_Six_Button" class="interactive" position="0.01 0.08 -0.03" rotation="0 0 0" gltf-model="#key_pad_button_model" animation__press="property:position; from:0 0.08 -0.03; to:0.01 0.08 -0.03; dur:100; startEvents:click" shadow numberkey="value:6; parentpadlock: #Closet_Lock;">
                            <a-entity text="value:6; width:0.25; align:center;" position="0.01 0.01 0" rotation="0 90 0"></a-entity>
                        </a-entity>
                        <a-entity id="Closet_Lock_Seven_Button" class="interactive" position="0.01 0.05 0.03" rotation="0 0 0" gltf-model="#key_pad_button_model" animation__press="property:position; from:0 0.05 0.03; to:0.01 0.05 0.03; dur:100; startEvents:click" shadow numberkey="value:7; parentpadlock: #Closet_Lock;">
                            <a-entity text="value:7; width:0.25; align:center;" position="0.01 0.01 0" rotation="0 90 0"></a-entity>
                        </a-entity>
                        <a-entity id="Closet_Lock_Eight_Button" class="interactive" position="0.01 0.05 0" rotation="0 0 0" gltf-model="#key_pad_button_model" animation__press="property:position; from:0 0.05 0; to:0.01 0.05 0; dur:100; startEvents:click" shadow numberkey="value:8; parentpadlock: #Closet_Lock;">
                            <a-entity text="value:8; width:0.25; align:center;" position="0.01 0.01 0" rotation="0 90 0"></a-entity>
                        </a-entity>
                        <a-entity id="Closet_Lock_Nine_Button" class="interactive" position="0.01 0.05 -0.03" rotation="0 0 0" gltf-model="#key_pad_button_model" animation__press="property:position; from:0 0.05 -0.03; to:0.01 0.05 -0.03; dur:100; startEvents:click" shadow numberkey="value:9; parentpadlock: #Closet_Lock;">
                            <a-entity text="value:9; width:0.25; align:center;" position="0.01 0.01 0" rotation="0 90 0"></a-entity>
                        </a-entity>
                    </a-entity>
                    <a-entity   id="Light_Fixture" position="0 2.2 0" rotation="0 0 0" gltf-model="#light_fixture_model" shadow>
                        <a-entity position="-0.5 -0.5 0" light="type:point; intensity:1; angle:40; penumbra:0.3; castShadow:false; shadowBias:-0.0007"></a-entity>
                    </a-entity>
                    <a-entity   id="Pinboard" position="0 0.75 2.495" rotation="0 0 0" gltf-model="#pinboard_model" shadow>
                        <!--a-entity text="value:Grocery List; color:black; width:0.8; align:center;" position="0.5 1 -0.1" rotation="0 180 0"></a-entity>
                        <a-entity text="value:3 Carrots; color:black; width:0.8; align:center;" position="0.498 0.943 -0.1" rotation="0 180 0"></a-entity>
                        <a-entity text="value:2 Onions; color:black; width:0.8; align:center;" position="0.5 0.893 -0.1" rotation="0 180 0"></a-entity>
                        <a-entity text="value:1 Bag of Rice; color:black; width:0.8; align:center;" position="0.469 0.845 -0.1" rotation="0 180 0"></a-entity>
                        <a-entity text="value:1 Chicken; color:black; width:0.8; align:center;" position="0.498 0.798 -0.1" rotation="0 180 0"></a-entity-->
                    </a-entity>
                    <a-entity   id="TV" position="0 1 -2.49" rotation="0 0 0" scale="1.1 1.1 1.1" gltf-model="#tv_model" shadow>
                   
                    </a-entity>
                    <a-entity geometry="primitive:plane;width:1.549;height:0.871;" position="0 1.5 -2.47" rotation="0 0 0" material="src:#canvas"></a-entity>
                    <!--The walls of the room are all parented under a larger object for organizational purposes.-->
                    <a-entity id="Walls">
                        <a-entity id="West_Wall" position="-3 0 0" rotation="0 90 0" scale="1 1 1" gltf-model="#wall_with_door_model" shadow
                        body="type: static; shape: none;"
                        shape="offset: 0 1.372 0; orientation: 0.707 0 0.707 0; halfExtents: 0.05 1.372 2.6">
                        </a-entity>
                        
                        <a-entity id="Middle_Wall" position="3 0 0" rotation="0 270 0" scale="1 1 1" gltf-model="#wall_with_door_model" shadow
                        body="type: static; shape: none;"
                        shape__north="offset: -0.74 1.372 0; orientation: 0.707 0 0.707 0; halfExtents: 0.05 1.372 1.86"
                        shape__south="offset: 2.24 1.372 0; orientation: 0.707 0 0.707 0; halfExtents: 0.05 1.372 0.36">
                        </a-entity>
                        <a-entity id="North_Wall" position="1.5 0 2.55" rotation="0 0 0" scale="1 1 1" gltf-model="#long_wall_model" shadow static-body="offset: 0 1.372 0"></a-entity>
                        <a-entity id="South_Wall" position="1.5 0 -2.55" rotation="0 0 0" scale="1 1 1" gltf-model="#long_wall_model" shadow static-body="offset: 0 1.372 0"></a-entity>
                        
                        <a-entity id="East_Wall" position="6 0 0" rotation="0 90 0" scale="1 1 1" gltf-model="#far_wall_model" shadow 
                        body="type: static; shape: none;"
                        shape="offset: 0 1.372 0; orientation: 0.707 0 0.707 0; halfExtents: 0.05 1.372 2.6">
                        </a-entity>

                    </a-entity>

                    <a-entity   id="Study_Desk_1" position="4.5 0 -2.13" rotation="0 0 0" scale="1 1 1" gltf-model="#desk_model" shadow static-body></a-entity>
                    <a-entity   id="Study_Desk_2" position="5.6369 0 1.5" rotation="0 270 0" scale="1 1 1" gltf-model="#desk_model" shadow body="type: static; shape: none;"
                    shape="offset: 0 0.45 0; orientation: 0 0 0 1; halfExtents: 0.6 0.45 0.3"></a-entity>
                    <a-entity   id="Desk" position="0 0 0" rotation="0 0 0" scale="1 1 1" gltf-model="#desk_model" shadow static-body></a-entity>
                    <a-entity id="Shelves_1" position="2.75 0 -1.28" rotation="0 0 0" scale="1 1 1" gltf-model="#shelves_withHints_model" shadow static-body></a-entity>

                    
                    <a-entity id="Shelves_2" position="5.7685 0 -1.28" rotation="0 0 0" scale="1 1 1" gltf-model="#shelves_model" shadow static-body></a-entity>
                    <a-entity id="Shelves_3" position="3.224 0 -1.28" rotation="0 180 0" scale="1 1 1" gltf-model="#shelves_model" shadow static-body></a-entity>
                
                <!--Doors are done by being parented to a hinge. This allows for them to simply do a local rotation to open.-->
                <a-entity id="Exit_Door_Hinge" position="-3 0 -1.12" rotation="0 0 0" scale="1 1 1" animation__open="property:rotation.y; to:90; dur:200; startEvents:open;" animation__close="property:rotation.y; to:0; dur:200; startEvents:close;">
                    <a-entity id="Exit_Door" position="0 0 -0.38" rotation="0 180 0" scale="1 1 1" gltf-model="#door_model" shadow></a-entity>
                </a-entity>

               <!--Doors are done by being parented to a hinge. This allows for them to simply do a local rotation to open.-->
                <a-entity id="Middle_Door_Hinge" position="3 0 1.12" animation__open="property:rotation.y; to:90; dur:200; startEvents:open;" animation__close="property:rotation.y; to:0; dur:200; startEvents:close;">
                    <a-entity id="Middle_Door" position="0 0 0.38" rotation="0 0 0" scale="1 1 1" gltf-model="#door_model" static-body shadow></a-entity>
                </a-entity>

                <a-entity id="Book" position="4.6 0.915 -2.05" rotation="0 90 90" scale="1 1 1" gltf-model="#book_model" shadow></a-entity>
                
                <a-entity id="Bed" position="-2.48 0 1.48" rotation="0 0 0" scale="1 1 1" gltf-model="#bed_model" shadow 
                body="type: static; shape: none;"
                shape="offset: 0 0.35 0; halfExtents: 0.47 0.35 1.016"
                ></a-entity>
                <a-entity id="Floor"position="1.5 0 0" rotation="0 0 0" scale="1 1 1" gltf-model="#floor_model" body="type: static; shape: none;"
                shape= "shape: box; orientation: 0.707 0 0.707 0; halfExtents 4.55 0.005 2.6" shadow>
                </a-entity>   
                </a-entity>

            </a-scene>
            <div style="height: 360px; width: 640px;" id="securitycamDiv"></div>
            <div id="mobileOverlay" class="mobileHud"></div>
        </body>
</html>